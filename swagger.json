{"swagger":"2.0","info":{"description":"API de consultas aos debitos no DETRAN-ES","version":"1.0.0","title":"api-detran-debitos"},"basePath":"/","tags":[{"name":"veiculos-debitos","description":""}],"schemes":["http"],"paths":{"/veiculos/{placa}/{renavam}":{"get":{"summary":"Dados do veiculo","description":"retorna os dados do veiculo através do WebService InternetBanking","parameters":[{"name":"renavam","required":true,"in":"path","description":"Renavam do veiculo.","type":""},{"name":"placa","required":true,"in":"path","description":"Placa do veiculo","type":""}],"responses":{"200":{"description":"Retorna informações do veiculo ","schema":{"$ref":"#/definitions/VeiculoRetorno"}},"403":{"description":"Retorna uma MensagemErro"}},"tags":["veiculos-debitos"],"produces":["application/json"],"consumes":["application/json"]}},"/veiculos/{placa}/{renavam}/debitos":{"get":{"summary":"Débitos do veiculo","description":"retorna uma lista com os débitos do veiculo","parameters":[{"name":"renavam","required":true,"in":"path","description":"Renavam do veiculo","type":""},{"name":"placa","required":true,"in":"path","description":"Placa do veiculo","type":""}],"responses":{"200":{"description":"Veiculo encontrado, retorna um array de debitos","schema":{"$ref":"#/definitions/Debito"}},"403":{"description":"Retorna uma MensagemErro"}},"tags":["veiculos-debitos"],"produces":["application/json"],"consumes":["application/json"]}},"/veiculos/{placa}/{renavam}/debitos-preview":{"get":{"summary":"Prévia dos débitos do veiculo","description":"Retorna uma previa dos débitos do veiculo","parameters":[{"name":"renavam","required":true,"in":"path","description":"Renavam do veiculo","type":""},{"name":"placa","required":true,"in":"path","description":"Placa do veiculo","type":""}],"responses":{"200":{"description":"Veiculo encontrado, retorna um array de debitos","schema":{"$ref":"#/definitions/TipoDebito"}},"403":{"description":"Retorna uma MensagemErro"}},"tags":["veiculos-debitos"],"produces":["application/json"],"consumes":["application/json"]}},"/veiculos/{placa}/{renavam}/debitos-tipo/{tipo_debito}":{"get":{"summary":"Lista de débitos filtrado por tipo","description":"Retorna uma lista de débitos do veiculo filtrada pelo tipo:                  LICENCIAMENTOATUAL, LICENCIAMETO ANTERIOR, IPVA, IPVAANTERIOR, DPVT, DPVATANTERIOR, MULTA","parameters":[{"name":"tipo_debito","required":true,"in":"path","description":"Tipo de debitos","type":""},{"name":"renavam","required":true,"in":"path","description":"Renavam do veiculo","type":""},{"name":"placa","required":true,"in":"path","description":"Placa do veiculo","type":""}],"responses":{"200":{"description":"Veiculo encontrado, retorna um array de debitos","schema":{"$ref":"#/definitions/Debito"}},"403":{"description":"Retorna uma MensagemErro"}},"tags":["veiculos-debitos"],"produces":["application/json"],"consumes":["application/json"]}},"/veiculos/{placa}/{renavam}/debitos/guia":{"get":{"summary":"Gerar GRU de todos os débitos","description":"Retornar uma GRU com todos os debitos ","parameters":[{"name":"renavam","required":true,"in":"path","description":"Renavam do veiculo","type":""},{"name":"placa","required":true,"in":"path","description":"Placa do veiculo","type":""}],"responses":{"200":{"description":"Veiculo encontrado, retorna o um array de itens e o pdf do boleto, em base64","schema":{"$ref":"#/definitions/GerarGuiaRetorno"}},"403":{"description":"Retorna uma MensagemErro"}},"tags":["veiculos-debitos"],"produces":["application/json"],"consumes":["application/json"]}},"/veiculos/{placa}/{renavam}/debitos/guia/{tipo_debito}":{"post":{"summary":"Gerar GRU de alguns debitos","description":"Retornar uma guia para pagamento dos debitos requisitados.","parameters":[{"name":"ListaIDs","required":true,"in":"body","description":"Array com os IDs dos debitos.","isArray":false,"schema":{"$ref":"#/definitions/ListaIDs"}},{"name":"tipo_debito","required":true,"in":"path","description":"tipo do debito","type":""},{"name":"renavam","required":true,"in":"path","description":"Renavam do veiculo","type":""},{"name":"placa","required":true,"in":"path","description":"Placa do veiculo","type":""}],"responses":{"200":{"description":"Veiculo encontrado, retorna o um array de itens e o pdf em base64 do boleto","schema":{"$ref":"#/definitions/DebitoRetorno"}},"403":{"description":"Retorna uma MensagemErro"}},"tags":["veiculos-debitos"],"produces":["application/json"],"consumes":["application/json"]}}},"definitions":{"VeiculoRetorno":{"type":"object","properties":{"placa":{"type":"string"},"modelo":{"type":"string"},"renavam":{"type":"number"},"mensagemErro":{"type":"string"}},"required":["placa","modelo","renavam","mensagemErro"]},"Debito":{"type":"object","properties":{"classe":{"type":"string","enum":["Licenciamento","Registro Veículo","IPVA","Seguro DPVAT","Multas","Vistoria","Certidões","Apreensão","Credenciamento","Diversos Veículos","Parcelamento IPVA","Placas","Pátio","Registro de Contrato"]},"codigoServico":{"type":"number"},"descricaoServico":{"type":"string"},"dataVencimento":{"type":"string"},"exercicio":{"type":"number"},"idDebito":{"type":"number"},"parcela":{"type":"number"},"placa":{"type":"string"},"valorAtualizadoFranquia":{"type":"number"},"dpvatCotas":{"type":"string"},"flagDpvatAnterior":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos DPVATANTERIOR. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagDpvatExercicio":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos DPVAT. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagIpvaAnterior":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos IPVAANTERIOR. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagIpvaExercicio":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos IPVA. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagIpvaParcelamento":{"type":"number","description":"Flag não utilizada no momento."},"flagLicenciamentoAnterior":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos LICENCIAMENTOANTERIOR. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagLicenciamentoExercicio":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos LICENCIAMENTOATUAL. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagMultas":{"type":"number","description":"Flag usado para gerar o boleto do tipo débitos MULTAS. Valores:  0 -> Não marcado (débito opcional);  1 -> Marcado (não pode desmarcar, débito obrigatório);  2 -> Marcado (pode desmarcar, débito opcional);  3 -> Desabilitado (não exibir o débito)."},"flagTaxaEspecial":{"type":"number","description":"Flag não utilizada no momento."},"flagTaxaPatio":{"type":"number","description":"Flag não utilizada no momento."},"flagTaxaServico":{"type":"number","description":"Flag não utilizada no momento."},"ipvaCotas":{"type":"string"}},"required":["classe","codigoServico","descricaoServico","dataVencimento","exercicio","idDebito","parcela","placa","valorAtualizadoFranquia","dpvatCotas","flagDpvatAnterior","flagDpvatExercicio","flagIpvaAnterior","flagIpvaExercicio","flagIpvaParcelamento","flagLicenciamentoAnterior","flagLicenciamentoExercicio","flagMultas","flagTaxaEspecial","flagTaxaPatio","flagTaxaServico","ipvaCotas"]},"TipoDebito":{"type":"object","properties":{"temLicenciamentoAtual":{"type":"boolean"},"temLicenciamentoAnterior":{"type":"boolean"},"temDPVAT":{"type":"boolean"},"temIPVA":{"type":"boolean"},"temMulta":{"type":"boolean"},"temIPVAAnterior":{"type":"boolean"},"temDPVATAnterior":{"type":"boolean"},"mensagemErro":{"type":"string"}},"required":["temLicenciamentoAtual","temLicenciamentoAnterior","temDPVAT","temIPVA","temMulta","temIPVAAnterior","temDPVATAnterior","mensagemErro"]},"ItemGuia":{"type":"object","properties":{"linhaDigitavel":{"type":"string"},"codigoBarra":{"type":"string"},"valorGuia":{"type":"number"},"postagem":{"type":"boolean"},"nome":{"type":"string"},"placa":{"type":"string"},"renavam":{"type":"number"},"marca":{"type":"string"},"nossoNumero":{"type":"string"},"vencimentoGuia":{"type":"string"},"tipoRegistro":{"type":"number"},"classe":{"type":"string","enum":["Licenciamento","Registro Veículo","IPVA","Seguro DPVAT","Multas","Vistoria","Certidões","Apreensão","Credenciamento","Diversos Veículos","Parcelamento IPVA","Placas","Pátio","Registro de Contrato"]},"descricaoServico":{"type":"string"},"dataVencimento":{"type":"string"},"valorVencimento":{"type":"number"},"valorCorrigido":{"type":"number"},"valorDesconto":{"type":"number"},"valorJuros":{"type":"number"},"valorMulta":{"type":"number"},"valorAtualizadoFranquia":{"type":"number"},"dataAutuacao":{"type":"string"},"horaAutuacao":{"type":"string"},"valorAuto":{"type":"number"}},"required":["linhaDigitavel","codigoBarra","valorGuia","postagem","nome","placa","renavam","marca","nossoNumero","vencimentoGuia","tipoRegistro","classe","descricaoServico","dataVencimento","valorVencimento","valorCorrigido","valorDesconto","valorJuros","valorMulta","valorAtualizadoFranquia","dataAutuacao","horaAutuacao","valorAuto"]},"GerarGuiaRetorno":{"type":"object","properties":{"itensGuia":{"type":"array","items":{"$ref":"#/definitions/ItemGuia"}},"mensagemErro":{"type":"string"},"guiaPDF":{"type":"string"}},"required":["itensGuia","mensagemErro","guiaPDF"]},"ListaIDs":{"type":"object","properties":{"lista":{"type":"array","items":{"type":"string"}}},"required":["lista"]},"DebitoRetorno":{"type":"object","properties":{"debitos":{"type":"array","items":{"$ref":"#/definitions/Debito"}},"mensagemErro":{"type":"string"}},"required":["debitos","mensagemErro"]}}}